<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/register.css">
</head>
<body>
    <header id="header"> 
        <div class="container inner_header">
            <a href="javascript:;"></a>
            <span>华为商城</span>
        </div>
    </header>   
    <section id="main">
        <div class="inner_main container">
         <div class="way">
             <span>手机号注册 </span>
             <span>邮件地址注册</span>
         </div> 
         <div class="detail_mob">
                <h2>华为账号注册</h2>
                <form action="">
                <span>已有账号,<a href="./login.html"> 去登录</a> > </span> <br>

                   <div class="local"><span>国家地区 </span>   <select name="local" id="local">
                    <option value="深圳">深圳</option>
                    <option value="北京">北京</option>
                    <option value="江阴">江阴</option>
                    <option value="常州">常州</option>
                    <option value="南昌">南昌</option>
                    <option value="鄱阳">鄱阳</option>
                    <option value="河南">河南</option>
                    <option value="亳州">亳州</option>
                </select></div>
                  <br>
               <select name="tel" id="country">
                    <option value="+86">+86(中国)</option>
                    <option value="+235">+235(乍得)</option>
                    <option value="+886">+886(中国台湾)</option>
                    <option value="+880">+880(孟加拉国)</option>
                    <option value="+855">+855(柬埔寨)</option>
                    <option value="+91">+91(印度)</option>
                    <option value="+856">+856(老挝)</option>
                    <option value="+90">+90(土耳其)</option>
                    <option value="+92">+92(巴基斯坦)</option>
                </select> 
                <input type="text" name="username" id="username" placeholder=" 请输入手机号"><br>
                <input type="text" name="" id="code" placeholder="验证码登陆"> <a href="./question.html">获取验证码</a> <br>
               
                 <input type="password" name="password" id="password" placeholder="密码">  <br>
                <input type="password" name="repass" id="repass" placeholder="确认密码">  <br>
                    出生日期                <br>
                 <input type="submit"value="注册"> 

                </form>
         </div>      
         <div class="detail_email">
            <h2>华为账号注册</h2>
            <span>已有账号,<a href="./login.html"> 去登录</a> > </span> <br>

                 国家地区<select name="local" id="">
                <option value="深圳">深圳</option>
                <option value="北京">北京</option>
                <option value="江阴">江阴</option>
                <option value="常州">常州</option>
                <option value="南昌">南昌</option>
                <option value="鄱阳">鄱阳</option>
                <option value="河南">河南</option>
                <option value="亳州">亳州</option>
            </select>  <br>
      
            <input type="text" name="" id="" placeholder="请输入邮箱"><br>
            <input type="text" name="" id="" placeholder="验证邮箱"> <a href="./question.html">获取验证码</a> <br>
           
             <input type="password" name="" id="" placeholder="密码">  <br>
            <input type="password" name="" id="" placeholder="确认密码">  <br>
                <!-- 出生日期                <br> -->
              <button>注册</button>


     </div>      

        </div>
    </section>
    <footer id="footer">  
        <img src="./images/index/4.png" alt="">
        xxxxxxxxxxxxx | xxxxxxxxxxxxxx  |XXXX|  xxxxxxxxxxxxx | xxxxxxxxxxxxxx   <br>
            .............................................................
    </footer>
</body>
<script src="./node_modules/_jquery@3.6.0@jquery/dist/jquery.min.js"></script>
<script src="./node_modules/_layui-layer@1.0.9@layui-layer/dist/layer.js"></script>
<!-- <script src="./node_modules/layer.js"></script> -->
<script>
        $('form').submit(function(){
           
            if($('[name="username"]').val()===""){
                layer.msg('用户名不能为空',{
                    icon:2,
                    time:1000
                })
                return false
            }

            var reg = /^[1-9]{11}$/;
            if(!reg.test($('[name="username"]').val())){
            layer.msg('请输入正确的手机号，11位',{
            icon:2,
            time:1000
            })
            return false
    }

    if($('[name="password"]').val() === ''){
        layer.msg('密码不能为空',{
            icon:2,
            time:1000
        })
        return false;
    }
    // 密码规则：6~16位，由字母、数字组成，必须包含字母和数字
    var reg = /^[a-zA-Z0-9]{6,16}$/
    if(!reg.test($('[name="password"]').val())){
        layer.msg('6~16位，由字母、数字组成，必须包含字母和数字',{
            icon:2,
            time:1000
        })
        return false
    }
    // 是否同时包含了字母和数字
    var word_reg = /[a-zA-Z]+/;
    var number_reg = /\d+/;
    if(!word_reg.test($('[name="password"]').val()) || !number_reg.test($('[name="password"]').val())){
        layer.msg('6~16位，由字母、数字组成，必须包含字母和数字',{
            icon:2,
            time:1000
        })
        return false
    }
    // 确认密码
    if($('[name="repass"]').val() !== $('[name="password"]').val()){
        layer.msg('两次密码不一致',{
            icon:2,
            time:1000
        })
        return false
    }

    $('[type="submit"]').prop('disabled',true)
    // ajax之前先加载层
    var loadindex = layer.load(0, {shade: [0.8,'#fff']})
    // 发送ajax
    $.post({
        url:'./php/register.php',
        data:$('form').serialize(),
        method:"post",
        dataType:'json',
        success:function(res){
            var {meta:{status,msg},data} = res;
            layer.close(loadindex)
            if(status===0){
                layer.msg(msg,{
                    icon:1,
                    time:1500
                })
                location.href = "./login.html"
            }else{
                layer.msg(msg,{
                    icon:2,
                    time:1500
                })
                $('[type="submit"]').prop('disabled',false)
                return fasle
            }
        }
    })

    return false;
})






        
</script>

</html>